@tailwind base;
@tailwind components;
@tailwind utilities;

:host {
  --header-bg-color: #f9fafb;
  --body-bg-color: #ffffff;
}

/* Locked rows styling */
.locked-row {
  @apply bg-gray-100 sticky z-[5];
  background-color: #f3f4f6 !important;
  top: var(
    --sticky-top,
    49px
  ); /* Fallback value, actual value set dynamically */
}

.locked-row td {
  @apply bg-inherit sticky z-[5];
  top: var(
    --sticky-top,
    49px
  ); /* Fallback value, actual value set dynamically */
}

/* .locked-row:hover {
  @apply bg-red-700;
} */

.table {
  @apply bg-white;
}

ntv-table td {
  @apply text-xs;
}

ntv-table .table-container {
  @apply rounded-lg relative;
  background: white !important;
}

/* Custom thin scrollbar styling for WebKit browsers */
.table-wrapper::-webkit-scrollbar {
  @apply w-2 h-2;
}

.table-wrapper::-webkit-scrollbar-track {
  @apply bg-gray-100 rounded;
}

.table-wrapper::-webkit-scrollbar-thumb {
  @apply bg-gray-400 rounded;
  transition: background-color 0.2s ease;
}

.table-wrapper::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-500;
}

.table-wrapper::-webkit-scrollbar-corner {
  @apply bg-gray-100;
}

thead th {
  @apply px-4 py-3 border-r border-gray-300 text-left font-semibold text-[#495057];
}

thead th:last-child {
  @apply border-r-0;
}

/* Checkbox column specific styling */
thead th.checkbox-column {
  @apply w-[48px] min-w-[48px] max-w-[48px] text-center p-2;
}

.checkbox-input {
  @apply w-[14px] h-[14px] cursor-pointer accent-[#8dcb2c]  border-2 border-[#8dcb2c] rounded-[3px] bg-white;

  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

.checkbox-input:checked {
  background-color: #8dcb2c; /* green-500 */
  border-color: #8dcb2c;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='%23ffffff' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' fill='none' d='M3 8l3 3 7-7'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: center;
  background-size: 12px 12px;
}

.checkbox-input:indeterminate {
  background-color: #e5e7eb; /* gray-200 */
  border-color: #e5e7eb; /* gray-400 */
}

.header-checkbox {
  margin: 0 auto;
  border: 2px solid #000000;
}

.row-checkbox {
  margin: 0 auto;
}

/* Index column specific styling */
thead th.index-column {
  @apply w-[60px] min-w-[60px] max-w-[60px] text-center font-semibold text-slate-600;
}

/* Expand column specific styling */
thead th.expand-column {
  @apply w-[50px] min-w-[50px] max-w-[50px] text-center;
}

/* Filtered column styling */
thead th.filtered-column {
  @apply border-l-[3px] border-l-blue-500 relative;
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%) !important;
}

thead th.filtered-column::before {
  @apply absolute top-0 left-0 right-0 h-0.5;
  content: '';
}

ntv-table tbody {
  background-color: var(--body-bg-color);
}

ntv-table tbody tr {
  @apply border-b border-gray-300;
  transition: background-color 0.2s ease;
}

ntv-table tbody tr:hover {
  background-color: #f8f9fa !important;
}

tbody tr:last-child {
  @apply border-b-0;
}

tbody td {
  @apply px-4 py-3 text-gray-700 align-middle whitespace-nowrap border-b border-gray-200;
}

tbody td:last-child {
  @apply border-r-0;
}

/* Filtered column body cells styling */
tbody td.filtered-column-cell {
  @apply border-l-2 border-l-blue-400 relative;
  background: linear-gradient(135deg, #f3f9ff 0%, #e8f4fd 100%);
}

/* Checkbox column specific styling */
tbody td.checkbox-column {
  @apply w-12 min-w-12 max-w-12 text-center p-2;
}

/* Column actions styling */
.column-actions {
  @apply flex flex-col gap-2 mt-4;
}

.column-actions ntv-button {
  transition: all 0.2s ease;
}

/* Expandable column transition */
th[ntvExpandableColumn],
td[ntvExpandableColumn] {
  transition: width 0.3s ease, min-width 0.3s ease, max-width 0.3s ease;
}

/* Shrunk columns styling - focus on width management */
.table.columns-shrunk th,
.table.columns-shrunk td {
  @apply overflow-hidden text-ellipsis whitespace-nowrap;
}

/* Default narrow column widths */
.table
  th:not(.checkbox-column):not(.index-column):not(.expand-column):not(
    .expandable-column
  ),
.table
  td:not(.checkbox-column):not(.index-column):not(.expand-column):not(
    .expandable-column
  ) {
  @apply min-w-[100px] overflow-hidden text-ellipsis whitespace-nowrap;
}

/* Fixed table width when columns are shrunk */
.table.columns-shrunk {
  @apply w-full;
  width: 100% !important;
  table-layout: fixed !important;
}

/* Dynamic column widths when shrunk - let inline styles control width */
.table.columns-shrunk
  th:not(.checkbox-column):not(.index-column):not(.expand-column):not(
    .column-actions
  ):not(.expandable-column),
.table.columns-shrunk
  td:not(.checkbox-column):not(.index-column):not(.expand-column):not(
    .column-actions
  ):not(.expandable-column) {
  @apply overflow-hidden text-ellipsis whitespace-nowrap;
  /* Remove fixed width constraints to allow dynamic sizing */
}

/* Index column specific styling */
tbody td.index-column {
  @apply w-[60px] min-w-[60px] max-w-[60px] text-center font-semibold text-slate-500 text-xs;
}

/* Expand column specific styling */
tbody td.expand-column {
  @apply w-[50px] min-w-[50px] max-w-[50px] text-center p-2;
}

.expand-btn {
  @apply bg-transparent border-0 cursor-pointer px-1.5 py-1 rounded text-sm text-slate-500 flex items-center justify-center w-full h-7;
  transition: all 0.2s ease;
}

.expand-btn:hover {
  @apply bg-slate-200 text-slate-600;
  transform: scale(1.1);
}

.expand-btn:active {
  transform: scale(0.95);
}

/* Expanded content row styles */
.expanded-content-row {
  @apply bg-gray-50 border-t border-gray-300;
  animation: slideDown 0.3s ease-out;
  transition: all 0.3s ease-out;
}

.expanded-content-row.collapsing {
  animation: slideUp 0.3s ease-in forwards;
}

.expanded-content-cell {
  @apply p-0 border-0;
  transition: all 0.3s ease-out;
}

.expanded-content-wrapper {
  @apply p-4 border-l-[3px] border-l-blue-500 bg-white m-2 rounded shadow-sm opacity-100;
  transition: all 0.3s ease-out;
  transform: translateY(0);
}

.expanded-content-wrapper.fade-out {
  @apply opacity-0;
  transform: translateY(-10px);
}

/* Status badges */
.status-pending {
  @apply bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-medium;
}

.status-completed {
  @apply bg-cyan-100 text-cyan-800 px-2 py-1 rounded text-xs font-medium;
}

.status-refunded {
  @apply bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium;
}

/* Payment status */
.payment-paid {
  @apply text-green-600 font-medium;
}

.payment-unpaid {
  @apply text-red-600 font-medium;
}

/* Action buttons */
.action-buttons {
  @apply flex gap-2 items-center;
}

.action-buttons button {
  @apply bg-transparent border-0 cursor-pointer p-1 rounded;
  transition: background-color 0.2s ease;
}

.action-buttons button:hover {
  @apply bg-gray-200;
}

.action-buttons button.edit-btn {
  @apply text-blue-600;
}

.action-buttons button.delete-btn {
  @apply text-red-600;
}

.action-buttons button.more-btn {
  @apply text-gray-500;
}

/* Keyframe animations for expanded rows */
@keyframes slideDown {
  from {
    transform: translateY(-10%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(-20%);
    opacity: 0;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-10px);
  }
}

/* Draggable column styles */
.draggable-table .draggable-header {
  @apply relative cursor-grab select-none;
  transition: all 0.2s ease;
}

.draggable-table .draggable-header:hover {
  @apply bg-gray-200;
}

.draggable-table .draggable-header:hover .drag-handle {
  @apply opacity-100;
}

.draggable-table .draggable-header.dragging {
  @apply opacity-50 cursor-grabbing z-[1000];
  transform: rotate(5deg);
}

.draggable-table .draggable-header.drag-over {
  @apply bg-blue-600 text-white;
}

.draggable-table .draggable-header.drag-over::after {
  @apply absolute -left-0.5 top-0 bottom-0 w-1 bg-green-600;
  content: '';
}

.draggable-table .drag-handle {
  @apply absolute right-2 top-1/2 opacity-0 text-xs text-gray-500 pointer-events-none;
  transform: translateY(-50%);
  transition: opacity 0.2s ease;
}

.draggable-table .column-placeholder {
  @apply bg-gray-50 border-2 border-dashed border-gray-300 opacity-70;
  /* This class is no longer used but kept for potential future use */
}

.draggable-column:hover {
  @apply bg-gray-50;
}

/* .draggable-column.drag-over {
  background-color: #e3f2fd;
  border-left: 3px solid #2196f3;
} */

/* Expandable column styles */
.expandable-column {
  @apply relative overflow-hidden;
  transition: width 0.3s ease;
}

.expandable-column:hover .resize-handle {
  background-color: rgba(0, 123, 255, 0.3) !important;
}

.expandable-column.expanded {
  @apply bg-gray-50;
}

.resize-handle {
  @apply absolute right-0 top-0 bottom-0 w-1 bg-transparent cursor-col-resize z-10;
  transition: background-color 0.2s ease;
}

.resize-handle:hover {
  background-color: #007bff !important;
}

.resize-handle::after {
  @apply absolute right-px top-1/2 w-0.5 h-5 opacity-0;
  content: '';
  transform: translateY(-50%);
  background-color: currentColor;
  transition: opacity 0.2s ease;
}

.resize-handle:hover::after {
  @apply opacity-70;
}

/* Global styles for resizing */
body.resizing {
  @apply cursor-col-resize select-none;
  cursor: col-resize !important;
}

body.resizing * {
  @apply cursor-col-resize select-none;
  cursor: col-resize !important;
}

.lock-btn {
  @apply bg-transparent border-0 cursor-pointer px-2 py-1 rounded text-sm;
  transition: all 0.2s ease;
}

.lock-btn:hover {
  @apply bg-gray-50;
}

.lock-btn.locked {
  @apply text-yellow-500;
}

.lock-btn.locked:hover {
  @apply bg-yellow-100;
}

.lock-btn.unlocked {
  @apply text-gray-500;
}

.lock-btn.unlocked:hover {
  @apply bg-gray-200;
}

.lock-btn:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.lock-btn:disabled:hover {
  @apply bg-transparent;
}

/* Table wrapper for expandable columns - styles merged with main .table-container */

.table-header-controls {
  @apply flex justify-end px-3 py-2;
}

.column-settings {
  @apply relative;
}

.column-search-input {
  @apply w-full px-3 py-2 border border-gray-400 mb-2.5;
}

.column-search-input:focus {
  @apply outline-none border-blue-600 shadow-blue-200;
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.column-search-input::placeholder {
  @apply text-gray-500 opacity-70;
}

.column-list {
  @apply max-h-[200px] overflow-y-auto mb-3 border-y border-gray-300;
}

.column-count-info {
  @apply m-0 text-xs text-gray-500 text-center italic;
}

.settings-btn {
  @apply bg-transparent border-0 text-base cursor-pointer px-2 py-1 rounded;
  transition: background-color 0.2s;
}

.settings-btn:hover {
  @apply bg-gray-200;
}

.column-selector-dropdown {
  @apply absolute top-full right-0 bg-white border border-gray-400 rounded-md shadow-lg z-[1000] min-w-[200px] mt-1;
}

.dropdown-header {
  @apply px-4 py-3 font-semibold border-b border-gray-200 bg-gray-50 text-sm;
}

.column-option {
  @apply flex justify-between px-4 py-2 cursor-pointer;
  transition: background-color 0.2s;
}

.column-option:hover {
  @apply bg-gray-50;
}

/* Toggle Switch Styles */
.toggle-switch {
  @apply relative inline-block w-11 h-6 mr-2;
}

.toggle-input {
  @apply opacity-0 w-0 h-0 absolute;
}

.toggle-slider {
  @apply absolute cursor-pointer top-0 left-0 right-0 bottom-0 bg-gray-400 rounded-full;
  transition: 0.3s;
}

.toggle-slider:before {
  @apply absolute h-[18px] w-[18px] left-[3px] bottom-[3px] bg-white rounded-full shadow-md;
  content: '';
  transition: 0.3s;
}

.toggle-input:checked + .toggle-slider {
  @apply bg-[#8dcb2c];
}

.toggle-input:focus + .toggle-slider {
  @apply shadow-[0_0_1px_#8dcb2c];
}

.toggle-input:checked + .toggle-slider:before {
  transform: translateX(20px);
}

.column-option span {
  @apply text-sm select-none;
}

.table-wrapper {
  @apply h-[600px] overflow-auto rounded-lg mb-3;
  /* Ensure scrollbars are always visible when needed */
  scrollbar-width: thin;
  scrollbar-color: #c1c1c1 #f1f1f1;
}

.table-wrapper table {
  @apply w-full border-separate border-spacing-0 relative;
  table-layout: auto;
}

.table-wrapper thead {
  @apply sticky top-0 z-10;
  background-color: var(--header-bg-color);
}

.table-wrapper thead th {
  @apply top-0 break-words;
}

.no-data-cell {
  @apply p-0 border-0;
}

.no-data-row {
  @apply w-full h-full flex justify-center items-center text-center;
}

.no-data-content {
  @apply flex flex-col items-center gap-4;
}

.no-data-message {
  @apply text-3xl font-bold mb-2;
}

.no-data-description {
  @apply text-gray-600 text-lg;
}

/* Filter styles */
.header-content {
  @apply flex items-center justify-between gap-2 text-sm font-bold whitespace-nowrap;
}

.column-filter {
  height: 18px;
}

.sort-btn {
  @apply bg-transparent border-0 cursor-pointer px-1 py-0.5 rounded-sm text-xs text-gray-500 min-w-5 flex items-center justify-center;
  transition: all 0.2s ease;
}

.sort-btn:hover {
  @apply bg-gray-200 text-gray-700;
}

.sort-btn:active {
  transform: scale(0.95);
}

.pagination {
  @apply flex justify-between;
}

.pagination-text {
  @apply text-sm;
}

/* Responsive design */
@media (max-width: 768px) {
  .table-container {
    @apply rounded-none shadow-none;
  }

  .data-table {
    @apply text-xs;
  }

  .data-table th,
  .data-table td {
    @apply px-3 py-2;
  }

  .draggable-table .draggable-header .drag-handle {
    @apply opacity-100; /* Always show on mobile */
  }

  .sort-btn {
    @apply text-[10px] min-w-4;
  }
}

/* Loading Overlay Styles */
.table__loading-overlay {
  @apply absolute top-0 left-0 right-0 bottom-0 bg-white/90 backdrop-blur-sm flex items-center justify-center z-[1000] rounded-lg;
  animation: fadeInOverlay 0.3s ease;
}

.table__loading-content {
  @apply flex flex-col items-center gap-4 p-6 bg-white rounded-lg shadow-lg border border-gray-200;
}

.table__loading-spinner {
  @apply w-8 h-8 border-[3px] border-gray-100 border-t-blue-500 rounded-full;
  animation: spin 1s linear infinite;
}

.table__loading-message {
  @apply text-sm font-medium text-gray-700 text-center m-0;
}

@keyframes fadeInOverlay {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
