<div class="filter-icon-container">
  <div class="filter-popup">
    <div class="filter-popup-content">
      <div class="filter-popup-header">
        <span>Filter {{ column().header }}</span>
      </div>
      <div class="filter-popup-body">
        @if (column().filterType === 'date') {
        <div class="date-filter-controls">
          <p class="filter-info">Date columns support sorting only:</p>
          <button
            class="sort-btn-popup"
            (click)="onSort()"
            [title]="'Sort ' + column().header"
          >
            {{ getSortIcon() }} Sort {{ sortOrder() === "asc" ? "Ascending" :
            "Descending" }}
          </button>
        </div>
        } @else if (column().filterType === 'select') {
        <select
          class="filter-popup-select"
          [value]="filterValue()"
          (change)="onFilterSelectChange($event)"
        >
          <option value="">All {{ column().header }}</option>
          @for (option of getUniqueValues(); track option) {
          <option [value]="option">{{ option }}</option>
          }
        </select>
        } @else if (column().filterType === 'number') {
        <input
          type="number"
          class="filter-popup-input"
          [value]="filterValue()"
          (input)="onFilterInputChange($event)"
          [placeholder]="'Enter ' + column().header.toLowerCase()"
        />
        } @else {
        <input
          type="text"
          class="filter-popup-input"
          [value]="filterValue()"
          (input)="onFilterInputChange($event)"
          [placeholder]="'Search ' + column().header.toLowerCase()"
        />
        <div class="text-filter-controls">
          <button
            class="sort-btn-popup"
            (click)="onSort()"
            [title]="'Sort ' + column().header"
          >
            {{ getSortIcon() }} Sort {{ sortOrder() === "asc" ? "Ascending" :
            "Descending" }}
          </button>
        </div>
        } @if (filterValue()) {
        <button class="clear-filter-btn" (click)="onClearFilter()">
          Clear Filter
        </button>
        }
      </div>
    </div>
  </div>
</div>
