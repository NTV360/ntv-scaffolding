/* Popover Base Styles */
.popover-container {
  @apply relative inline-block;
}

.popover {
  @apply fixed z-50 opacity-0 invisible transition-all duration-200 ease-in-out;
  @apply bg-white border border-gray-200 rounded-lg shadow-lg;
  @apply dark:bg-neutral-800 dark:border-neutral-700;
  transform: scale(0.95);
}

.popover--visible {
  @apply opacity-100 visible;
  transform: scale(1);
}

/* Popover Variants */
.popover--default {
  @apply bg-white border border-gray-200 shadow-lg;
  @apply dark:bg-neutral-800 dark:border-neutral-700;
}

.popover--bordered {
  @apply bg-white border-2 border-gray-300 shadow-md;
  @apply dark:bg-neutral-800 dark:border-neutral-600;
}

.popover--shadow {
  @apply bg-white border border-gray-100 shadow-xl;
  @apply dark:bg-neutral-800 dark:border-neutral-700;
}

.popover--minimal {
  @apply bg-white border border-gray-100 shadow-sm;
  @apply dark:bg-neutral-800 dark:border-neutral-700;
}

/* Popover Sizes */
.popover--sm {
  @apply max-w-xs;
}

.popover--md {
  @apply max-w-sm;
}

.popover--lg {
  @apply max-w-md;
}

.popover--xl {
  @apply max-w-lg;
}

/* Popover Content */
.popover__content {
  @apply relative z-10;
}

.popover--sm .popover__content {
  @apply p-2 text-sm;
}

.popover--md .popover__content {
  @apply p-3 text-base;
}

.popover--lg .popover__content {
  @apply p-4 text-base;
}

.popover--xl .popover__content {
  @apply p-5 text-lg;
}

/* Popover Trigger */
.popover__trigger {
  @apply inline-block cursor-pointer;
}

.popover__trigger--disabled {
  @apply opacity-50 cursor-not-allowed;
}

.popover__trigger:focus {
  @apply outline-none rounded;
}

/* Popover Arrow Base */
.popover__arrow {
  @apply absolute w-3 h-3 transform rotate-45;
  @apply bg-white border border-gray-200;
  @apply dark:bg-neutral-800 dark:border-neutral-700;
}

/* Arrow Variants */
.popover__arrow--bordered {
  @apply border-2 border-gray-300;
  @apply dark:border-neutral-600;
}

.popover__arrow--shadow {
  @apply border border-gray-100;
  @apply dark:border-neutral-700;
}

.popover__arrow--minimal {
  @apply border border-gray-100;
  @apply dark:border-neutral-700;
}

/* Arrow Positioning - Top Placements */
.popover__arrow--top {
  @apply -bottom-1.5 left-1/2 -translate-x-1/2;
  @apply border-t-0 border-l-0;
}

.popover__arrow--top-start {
  @apply -bottom-1.5 left-4;
  @apply border-t-0 border-l-0;
}

.popover__arrow--top-end {
  @apply -bottom-1.5 right-4;
  @apply border-t-0 border-l-0;
}

/* Arrow Positioning - Bottom Placements */
.popover__arrow--bottom {
  @apply -top-1.5 left-1/2 -translate-x-1/2;
  @apply border-b-0 border-r-0;
}

.popover__arrow--bottom-start {
  @apply -top-1.5 left-4;
  @apply border-b-0 border-r-0;
}

.popover__arrow--bottom-end {
  @apply -top-1.5 right-4;
  @apply border-b-0 border-r-0;
}

/* Arrow Positioning - Left Placements */
.popover__arrow--left {
  @apply -right-1.5 top-1/2 -translate-y-1/2;
  @apply border-l-0 border-b-0;
}

.popover__arrow--left-start {
  @apply -right-1.5 top-4;
  @apply border-l-0 border-b-0;
}

.popover__arrow--left-end {
  @apply -right-1.5 bottom-4;
  @apply border-l-0 border-b-0;
}

/* Arrow Positioning - Right Placements */
.popover__arrow--right {
  @apply -left-1.5 top-1/2 -translate-y-1/2;
  @apply border-r-0 border-t-0;
}

.popover__arrow--right-start {
  @apply -left-1.5 top-4;
  @apply border-r-0 border-t-0;
}

.popover__arrow--right-end {
  @apply -left-1.5 bottom-4;
  @apply border-r-0 border-t-0;
}

/* Animation Enhancements */
.popover {
  transition-property: opacity, visibility, transform;
  transition-duration: 200ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Placement-specific animations */
.popover--top {
  transform-origin: bottom center;
}

.popover--bottom {
  transform-origin: top center;
}

.popover--left {
  transform-origin: right center;
}

.popover--right {
  transform-origin: left center;
}

.popover--top-start {
  transform-origin: bottom left;
}

.popover--top-end {
  transform-origin: bottom right;
}

.popover--bottom-start {
  transform-origin: top left;
}

.popover--bottom-end {
  transform-origin: top right;
}

.popover--left-start {
  transform-origin: right top;
}

.popover--left-end {
  transform-origin: right bottom;
}

.popover--right-start {
  transform-origin: left top;
}

.popover--right-end {
  transform-origin: left bottom;
}

/* Hover Effects */
.popover__trigger:hover:not(.popover__trigger--disabled) {
  @apply opacity-80;
}

/* Focus States */
.popover__trigger:focus-visible {
  @apply outline-none ring-2 ring-blue-500 ring-opacity-50 rounded;
}

/* Dark Mode Enhancements */
.dark .popover {
  @apply bg-neutral-800 border-neutral-700;
}

.dark .popover__arrow {
  @apply bg-neutral-800 border-neutral-700;
}

.dark .popover--bordered {
  @apply border-neutral-600;
}

.dark .popover__arrow--bordered {
  @apply border-neutral-600;
}

/* Responsive Design */
@media (max-width: 640px) {
  .popover--xl {
    @apply max-w-sm;
  }

  .popover--lg {
    @apply max-w-xs;
  }

  .popover--xl .popover__content {
    @apply p-4 text-base;
  }

  .popover--lg .popover__content {
    @apply p-3 text-sm;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  .popover {
    @apply border-2 border-black;
  }

  .dark .popover {
    @apply border-2 border-white;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .popover {
    @apply transition-none;
  }

  .popover--visible {
    transform: none;
  }
}
